%h2
  Item Details
%div.action_buttons.float_right
  -if @user.can_activate?(item) or @user.name == "admin"
    %div.button_container
      -if item.active?
        %form{:action => "/item/#{item.id}/act_deact/false", :method => "POST"}
          %input.styled-button{:type => "submit", :value => "Deactivate", :text => "deacBtn"}
      -else
        %form{:action => "/item/#{item.id}/act_deact/true", :method => "POST"}
          %input.styled-button{:type => "submit", :value => "Activate", :text => "deacBtn"}
  -if @user.can_edit?(item) or @user.name == "admin"
    %div.button_container
      %form{:action => "/item/#{item.id}/edit", :method => "GET"}
        %input.styled-button{:type => "submit", :value => "Edit", :text => "editBtn"}
  -if @user.can_delete?(item)
    %div.button_container
      %form{:action => "/item/#{item.id}", :method => "POST"}
        %input{:name => "_method", :type => "hidden", :value => "delete"}
        %input.styled-button.delete-color{:type => "submit", :value => "Delete", :text => "delBtn"}
  -if @user.can_buy?(item)
    %div.button_container
      #button_container
        %form{:action => "/user/buy/#{item.id}", :method => "POST"}
          %input.styled-button.buy-color{:type => "submit", :value => "Buy"}
%h4
  -if item.active?
    This item is currently being traded
  -else
    This item is currently not being traded
%div#item_details
  %div.picture_container
    %img{:src => "#{item.image_path}", :width => "200", :height => "200" }
  %div.details_container
    %h3.no_top_margin
      Name
    %p
      :escaped
        #{item.name}
    %h3
      Price
    %p
      #{item.price}
    %h3
      Owner
    %p
      :escaped
        #{item.owner.name}
%h3
  Description
-if item.description == ""
  %p
    No description available
-else
  %div.markdown_view
    =marked_down_description
%br
%table.table-comments
  %thead
    %tr
      %th
        %h3 Comments
  %tbody
    -for comment in item.comments
      %tr
        %td
          %h4
            %a{:href => url("/user/#{item.owner.name}")}
              :escaped
                #{comment.owner}
            wrote at: #{comment.time_stamp}
          %div.markdown_view
            = RDiscount.new(comment.description, :smart, :filter_html).to_html
    %tr
      %td
        %form{:action => "/item/#{item.id}/add_comment", :method => "POST", :onsubmit => "return validate_login(this);"}
          %textarea.textbox8.comment{:name => "item_comment"}
          %tr
            %td
              %div.button_container
                %input.styled-button{:type => "submit", :value => "Comment"}


:javascript
  function validate_login(form) {
    form.item_comment.value = form.item_comment.value.trim()
    if (form.item_comment.value == "") {
      form.item_comment.style.backgroundColor = "rgba(245, 106, 82, 0.41)"
      document.getElementById('error_message').innerHTML = "Please enter something!"
      return false
    }
    return true;
  }

